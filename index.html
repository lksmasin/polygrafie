<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Počítání řezů</title>
    <style>
        #napoveda {
            display: none;
        }
    </style>
</head>
<body onload="showPopup()">
    <h1>Počítání řezů</h1>
    
    <button onclick="toggleNapoveda()">Nápověda a informace</button>
    <br>
    <br>
    <div id="napoveda">
        <p>Zadej údaje a klikni na tlačítko 'Vypočítat' a zobrazý se řezy.</p>
        <p>Nástroj vytvořil LUKYMAS</p>
        <p>-------------</p>
    </div>

    

    <form id="calculatorForm">
        <label for="sirkaFormatu">Šířka čistého formátu:</label>
        <input type="number" id="sirkaFormatu" name="sirkaFormatu" value="320" required><br>
        
        <label for="vyskaFormatu">Výška čistého formátu:</label>
        <input type="number" id="vyskaFormatu" name="vyskaFormatu" value="450" required><br>
        
        <label for="sirkaTiskoviny">Šířka tiskoviny:</label>
        <input type="number" id="sirkaTiskoviny" name="sirkaTiskoviny" value="89" required><br>
        
        <label for="vyskaTiskoviny">Výška tiskoviny:</label>
        <input type="number" id="vyskaTiskoviny" name="vyskaTiskoviny" value="51" required><br>
        
        <label for="okrajLevy">Okraj z levé strany:</label>
        <input type="number" id="okrajLevy" name="okrajLevy" value="23" required><br>
        
        <label for="okrajHorni">Okraj z horní strany:</label>
        <input type="number" id="okrajHorni" name="okrajHorni" value="8" required><br>
        
        <label for="spadavka">Spádavka:</label>
        <input type="number" id="spadavka" name="spadavka" value="4" required><br>
        
        <input type="submit" value="Vypočítat">
    </form>

    <h2>Výsledek:</h2>
    <h3>Řezy z levé strany:</h3>
    <div id="levy_rezy"></div>
    <div id="levy_info"></div>
    <h3>Řezy z horní strany:</h3>
    <div id="horni_rezy"></div>
    <div id="horni_info"></div>

    <script>
        function showPopup() {
            alert("Nejsem zodpovědný za problémy vziklé používáním tohoto nástoje! :P");
        }

        function toggleNapoveda() {
            var element = document.getElementById("napoveda");
            if (element.style.display === "none") {
                element.style.display = "block";
            } else {
                element.style.display = "none";
            }
        }

        document.getElementById("calculatorForm").addEventListener("submit", function(event) {
            event.preventDefault();

            let sirkaFormatu = parseInt(document.getElementById("sirkaFormatu").value);
            let vyskaFormatu = parseInt(document.getElementById("vyskaFormatu").value);
            let sirkaTiskoviny = parseInt(document.getElementById("sirkaTiskoviny").value);
            let vyskaTiskoviny = parseInt(document.getElementById("vyskaTiskoviny").value);
            let okrajLevy = parseInt(document.getElementById("okrajLevy").value);
            let okrajHorni = parseInt(document.getElementById("okrajHorni").value);
            let spadavka = parseInt(document.getElementById("spadavka").value);

            let levy = levyRezy(sirkaFormatu, sirkaTiskoviny, okrajLevy, spadavka);
            vypisRezy(levy, 'levy_rezy');
            document.getElementById('levy_info').innerText = `Otočit\n\nPoslední řez: ${sirkaTiskoviny}`;

            let horni = horniRezy(vyskaFormatu, vyskaTiskoviny, okrajHorni, spadavka);
            vypisRezy(horni, 'horni_rezy');
            document.getElementById('horni_info').innerText = `Otočit\n\nPoslední řez: ${vyskaTiskoviny}`;
        });

        function levyRezy(sirkaFormatu, sirkaTiskoviny, okrajLevy, spadavka) {
            let rezy = [];
            let poziceRezu = sirkaFormatu - okrajLevy;

            while (poziceRezu >= sirkaTiskoviny) {
                rezy.push(poziceRezu);
                poziceRezu -= sirkaTiskoviny;
                if (poziceRezu >= sirkaTiskoviny) {
                    rezy.push(poziceRezu);
                }
                poziceRezu -= spadavka;
            }

            return rezy;
        }

        function horniRezy(vyskaFormatu, vyskaTiskoviny, okrajHorni, spadavka) {
            let rezy = [];
            let poziceRezu = vyskaFormatu - okrajHorni;

            while (poziceRezu >= vyskaTiskoviny) {
                rezy.push(poziceRezu);
                poziceRezu -= vyskaTiskoviny;
                if (poziceRezu >= vyskaTiskoviny) {
                    rezy.push(poziceRezu);
                }
                poziceRezu -= spadavka;
            }

            return rezy;
        }

        function vypisRezy(rezy, idElementu) {
            let element = document.getElementById(idElementu);
            element.innerHTML = '';

            rezy.forEach((rez, index) => {
                let p = document.createElement('p');
                p.textContent = `${index + 1}. Řez: ${rez}`;
                element.appendChild(p);
            });
        }
    </script>
</body>
</html>
